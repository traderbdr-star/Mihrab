<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>ูุญุฑุงุจ ุงููุฑูุฏ - ูููุงู ุจุฏุฑ</title>
    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Aref+Ruqaa:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        :root { --soft-bg: #fdfcf0; --dark-text: #2c3e50; --card-bg: #ffffff; --gold: #d4af37; --premium-gold: linear-gradient(135deg, #d4af37 0%, #b8860b 100%); --dhikr-border: 1px solid #3498db; }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; }
        body { font-family: 'Amiri', serif; background-color: var(--soft-bg); color: var(--dark-text); margin: 0; padding: 0; user-select: none; overflow-x: hidden; }
        #start-screen { position: fixed; inset: 0; background: var(--soft-bg); z-index: 2000; display: flex; flex-direction: column; justify-content: center; align-items: center; }
        .main-title { font-family: 'Aref Ruqaa', serif; font-size: 3.5rem; font-weight: bold; margin-bottom: 30px; color: #1a1a1a; }
        .dates-wrapper { display: flex; justify-content: center; gap: 10px; margin-bottom: 12px; font-weight: bold; }
        .date-frame { padding: 5px 15px; border-radius: 8px; background: rgba(255,255,255,0.7); font-size: 0.95rem; border: none; box-shadow: 0 1px 3px rgba(0,0,0,0.05); cursor: pointer; }
        
        /* ุชุนุฏูู ุงููุณุงุญุฉ ุงูุนูููุฉ ููุง */
        .sticky-header { position: fixed; top: 0; left: 0; right: 0; z-index: 1000; background: var(--soft-bg); padding: 40px 10px 10px 10px; text-align: center; border-bottom: 1px solid #eee; height: 250px; }
        
        .dots-container { display: flex; justify-content: center; gap: 15px; margin: 10px 0 5px 0; }
        .mission-dot { width: 14px; height: 14px; border-radius: 50%; background: #e0e0e0; border: 1px solid #ccc; transition: all 0.6s; }
        .mission-dot.completed { border: none; box-shadow: 0 0 15px currentColor; }
        .dot-1.completed { background-color: #d4af37; color: #d4af37; }
        .dot-2.completed { background-color: #27ae60; color: #27ae60; }
        .dot-3.completed { background-color: #2980b9; color: #2980b9; }
        .dot-4.completed { background-color: #e74c3c; color: #e74c3c; }
        .dot-5.completed { background-color: #8e44ad; color: #8e44ad; }
        .dot-6.completed { background-color: #2c3e50; color: #2c3e50; }
        .dot-7.completed { background-color: #000000; color: #000000; }
        
        #star-display { display: flex; justify-content: center; gap: 15px; height: 25px; margin-top: 2px; }
        .star-item { width: 14px; font-size: 0.7rem; color: #d4af37; font-weight: bold; display: flex; align-items: center; justify-content: center; position: relative; }
        .star-item::before { content: "โญ"; position: absolute; font-size: 1.2rem; z-index: -1; }

        .timer-val { font-family: 'Courier New', monospace; font-size: 2.6rem; font-weight: bold; color: #1a1a1a; margin-top: 0px; }
        
        /* ุชุนุฏูู ุจุฏุงูุฉ ุงููุญุชูู ูุชูุงุณุจ ุงููุณุงุญุฉ ุงูุฌุฏูุฏุฉ */
        .container { padding-top: 260px; padding-bottom: 20px; max-width: 600px; margin: 0 auto; }
        
        .mission-card { display: none; }
        .mission-card.active { display: block; }
        .dhikr-item { background: var(--card-bg); padding: 20px; border-radius: 12px; margin: 10px; display: flex; align-items: center; gap: 15px; border: var(--dhikr-border); box-shadow: 0 2px 5px rgba(0,0,0,0.03); scroll-margin-top: 255px; transition: transform 0.3s; }
        .dhikr-item.checked-off { display: none; }
        .dhikr-text { font-size: 1.25rem; line-height: 1.9; text-align: right; width: 100%; color: #1a1a1a; white-space: pre-wrap; }
        .heart-btn { width: 45px; height: 45px; cursor: pointer; display: flex; align-items: center; justify-content: center; flex-shrink: 0; }
        .heart-icon { height: 28px; width: 28px; background-color: #d1d8e0; clip-path: path('M12 4.248c-3.148-5.402-12-3.825-12 2.944 0 4.661 5.571 9.427 12 15.808 6.43-6.381 12-11.147 12-15.808 0-6.792-8.875-8.306-12-2.944z'); }
        .active-dhikr .heart-icon { background-color: #e74c3c; animation: pulse 1s infinite; }
        @keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.15); } }
        
        #dashboard-view { display: none; flex-direction: column; align-items: center; padding: 20px 10px; text-align: center; border: 2px solid var(--gold); border-radius: 25px; margin: 260px 15px 10px; background: white; min-height: 70vh; gap: 15px; }
        
        .grid { display: grid; grid-template-columns: repeat(10, 24px); gap: 5px; direction: ltr; margin: 10px 0; }
        .square { width: 24px; height: 24px; border: 1px solid #333; background: #fff; cursor: pointer; transition: background 0.2s; }
        .square.filled { background: var(--gold); }
        .tehlil-box { background: #fdfcf0; padding: 15px; border-radius: 15px; width: 95%; border: 1px dashed var(--gold); }
        .tehlil-stat { font-size: 0.95rem; margin: 5px 0; color: #555; font-weight: bold; }
        #daily-progress-bar { height: 8px; border-radius: 4px; transition: width 0.5s; margin-top: 8px; background: #eee; overflow: hidden; }
        .progress-inner { height: 100%; border-radius: 4px; transition: width 0.5s; }
        #khatm-modal { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.85); z-index: 4000; justify-content: center; align-items: center; padding: 15px; }
        .khatm-content { background: #fff; border: 5px double var(--gold); border-radius: 25px; padding: 30px 20px; max-width: 650px; width: 100%; max-height: 90vh; overflow-y: auto; text-align: center; box-shadow: 0 0 30px rgba(0,0,0,0.5); }
        .khatm-title { font-family: 'Aref Ruqaa', serif; font-size: 2.2rem; color: #b8860b; margin-bottom: 20px; border-bottom: 2px solid #eee; padding-bottom: 10px; }
        .khatm-text { font-size: 1.4rem; line-height: 2.2; text-align: justify; color: #222; margin-bottom: 25px; }
        #guide-modal { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.95); z-index: 5000; justify-content: center; align-items: center; padding: 5px; }
        .guide-content { background: #1a1a1a; background-image: url('https://www.transparenttextures.com/patterns/black-paper.png'); color: #e0e0e0; padding: 25px 20px; border-radius: 30px; max-height: 95vh; overflow-y: auto; width: 100%; max-width: 800px; text-align: right; border: 3px solid #d4af37; position: relative; }
        .guide-header-top { font-family: 'Aref Ruqaa', serif; color: #d4af37; text-align: center; font-size: 2.5rem; border-bottom: 2px double #d4af37; margin-bottom: 30px; padding-bottom: 10px; }
        .rank-section { position: relative; margin-bottom: 30px; }
        .guide-item { padding: 20px; background: rgba(255,255,255,0.05); border-radius: 20px; border: 1px solid #333; transition: all 0.3s; position: relative; overflow: hidden; }
        .guide-item.locked .guide-blur-container { filter: blur(8px); pointer-events: none; opacity: 0.6; }
        .guide-item h3 { font-family: 'Aref Ruqaa', serif; color: #fdfcf0; font-size: 2rem; margin-top: 0; border-right: 10px solid #d4af37; padding-right: 15px; display: flex; align-items: center; gap: 10px; }
        .guide-item.locked { border: 1px solid #3498db; }
        .guide-item.locked h3 { border-right-color: #3498db; }
        .guide-item.locked h3::after { content: " ๐"; font-size: 1.2rem; }
        .lock-message { display: none; position: absolute; top: 55%; left: 50%; transform: translate(-50%, -50%); width: 85%; text-align: center; background: rgba(0,0,0,0.85); color: #d4af37; padding: 12px; border-radius: 12px; border: 2px solid #3498db; z-index: 100; font-weight: bold; font-size: 1.2rem; box-shadow: 0 0 15px rgba(0,0,0,0.5); }
        .guide-item.locked .lock-message { display: block; }
        .guide-desc { font-size: 1.25rem; line-height: 1.8; color: #ccc; margin: 15px 0; text-align: justify; }
        .guide-rules { display: flex; flex-wrap: wrap; gap: 10px; background: #000; padding: 15px; border-radius: 12px; margin: 15px 0; border: 1px solid #d4af37; }
        .rule-chip { background: #333; padding: 5px 15px; border-radius: 20px; font-size: 0.9rem; color: #d4af37; border: 1px solid #555; }
        .guide-section-title { font-weight: bold; color: #d4af37; margin-top: 20px; display: block; border-bottom: 1px solid #444; padding-bottom: 5px; font-size: 1.15rem; }
        .pos-list { color: #81c784; font-size: 1.15rem; padding: 10px; line-height: 1.7; background: rgba(129, 199, 132, 0.05); border-radius: 10px; margin-top: 5px; }
        .neg-list { color: #e57373; font-size: 1.15rem; padding: 10px; line-height: 1.7; background: rgba(229, 115, 115, 0.05); border-radius: 10px; margin-top: 5px; }
        .essential-box { color: #bbdefb; font-size: 1.15rem; padding: 10px; line-height: 1.7; background: rgba(187, 222, 251, 0.05); border-radius: 10px; margin-top: 5px; border: 1px dashed #64b5f6; }
        .close-guide-btn { position: sticky; bottom: 0; left: 50%; transform: translateX(-50%); background: var(--premium-gold); color: white; border: none; padding: 15px 60px; border-radius: 40px; font-size: 1.3rem; margin-top: 20px; cursor: pointer; font-family: 'Aref Ruqaa', serif; box-shadow: 0 5px 20px rgba(0,0,0,0.5); z-index: 1000; }
        .mini-start-btn { padding: 12px 40px; font-size: 1.2rem; background: var(--premium-gold); color: white; border: none; border-radius: 30px; cursor: pointer; font-family: 'Amiri', serif; }
        .khatm-close-btn { background: var(--gold); color: white; border: none; padding: 12px 30px; border-radius: 20px; cursor: pointer; font-size: 1.1rem; margin-top: 15px; }
        #khatm-trigger-btn { background: var(--premium-gold); color: white; border: none; padding: 15px 40px; border-radius: 30px; cursor: pointer; font-family: 'Aref Ruqaa', serif; font-size: 1.4rem; margin-top: 20px; display: none; }
    </style>
</head>
<body>
    <audio id="alarm-snd"><source src="https://actions.google.com/sounds/v1/alarms/beep_short.ogg" type="audio/ogg"></audio>

    <div id="start-screen">
        <div class="main-title">ูุญุฑุงุจ ุงููุฑูุฏ</div>
        <div class="dates-wrapper">
            <div class="date-frame" id="start-miladi"></div>
            <div class="date-frame" id="start-hijri" onclick="showDashboard()"></div>
        </div>
        <button id="real-start-btn" class="mini-start-btn">ุจุณู ุงููู ูุจุชุฏุฆ</button>
    </div>

    <div class="sticky-header" id="main-header" style="display:none;">
        <div class="dates-wrapper">
            <div class="date-frame" id="h-miladi" onclick="skipMission(-1)"></div>
            <div class="date-frame" id="h-hijri" onclick="skipMission(1)"></div>
        </div>
        <div class="dots-container">
            <div class="mission-dot dot-1" id="dot-1"></div>
            <div class="mission-dot dot-2" id="dot-2"></div>
            <div class="mission-dot dot-3" id="dot-3"></div>
            <div class="mission-dot dot-4" id="dot-4"></div>
            <div class="mission-dot dot-5" id="dot-5"></div>
            <div class="mission-dot dot-6" id="dot-6"></div>
            <div class="mission-dot dot-7" id="dot-7"></div>
        </div>
        <div id="star-display"></div>
        <div id="mission-timer" class="timer-val">00:00</div>
    </div>

    <div class="container" id="dhikr-container" style="display:none; text-align: center;">
        <div class="mission-card active" id="mission-1" data-time="82">
            <div class="dhikr-item"><div class="heart-btn" onclick="toggleHeart(this)"><div class="heart-icon"></div></div><span class="dhikr-text">ุจุณู ุงููู ุงูุฑุญูู ุงูุฑุญูู ู ุตู ุงูููู ู ุณูู ู ุจุงุฑู ุนูู ุณูุฏูุง ูุญูุฏ ุฃุดุฑู ุงูุฃูุจูุงุก ู ุงููุฑุณููู ู ุนูู ุขูู ู ุตุญุจู ุฅูู ุฃู ุชุฑุซ ุงูููู ุงูุฃุฑุถ ู ูู ุนูููุง ู ุฃูุช ุฎูุฑ ุงููุงุฑุซูู.</span></div>
            <div class="dhikr-item"><div class="heart-btn" onclick="toggleHeart(this)"><div class="heart-icon"></div></div><span class="dhikr-text">๐ผ ุฃุนูุฐ ุจูููุงุช ุงููู ุงูุชุงูุฉ ูู ูู ุดูุทุงู ู ูุงูุฉ ู ูู ูู ุนูู ูุงูุฉ ร3</span></div>
            <div class="dhikr-item"><div class="heart-btn" onclick="toggleHeart(this)"><div class="heart-icon"></div></div><span class="dhikr-text">๐ผ ุฃุนูุฐ ุจูููุงุช ุงููู ุงูุชุงูุงุช ูู ุดุฑ ูุง ุฎูู ร3</span></div>
            <div class="dhikr-item"><div class="heart-btn" onclick="toggleHeart(this)"><div class="heart-icon"></div></div><span class="dhikr-text">๐ผ ยซุฑุจ ุฃุนูุฐ ุจู ูู ููุฒุงุช ุงูุดูุงุทูู ู ุฃุนูุฐ ุจู ุฑุจ ุฃู ูุญุถุฑููยป ร3</span></div>
            <div class="dhikr-item"><div class="heart-btn" onclick="toggleHeart(this)"><div class="heart-icon"></div></div><span class="dhikr-text">ุฑุจ ุฃุนูุฐ ุจู ูู ุดุฑ ููุณู ู ูู ุดุฑ ุงูุดูุทุงู ู ุดุฑูู ู ููุฒู ู ููุฎู ู ูุณูุณุชู ู ููุซูุ ู ุฃุนูุฐ ุจู ูู ูู ูู ู ูุง ูุญุฌุจูู ู ูุดุบููู ุนูู ูุง ุงููู.</span></div>
        </div>
        <div class="mission-card" id="mission-2" data-time="60">
            <div class="dhikr-item"><div class="heart-btn" onclick="toggleHeart(this)"><div class="heart-icon"></div></div><span class="dhikr-text">๐ผ ุจุณู ุงููู ุงูุฐู ูุง ูุถุฑ ูุน ุงุณูู ุดูุก ูู ุงูุฃุฑุถ ู ูุง ูู ุงูุณูุงุก ู ูู ุงูุณููุน ุงูุนูููร3 (ูู ูุงููุง ุซูุงุซูุง ุฅุฐุง ุฃุตุจุญ ูุซูุงุซูุง ุฅุฐุง ุฃูุณูุ ูู ูุถุฑููู ุดูุก)</span></div>
            <div class="dhikr-item"><div class="heart-btn" onclick="toggleHeart(this)"><div class="heart-icon"></div></div><span class="dhikr-text">๐ผ ุจุณู ุงููู ุงูุฑุญูู ุงูุฑุญูู ร21</span></div>
        </div>
        <div class="mission-card" id="mission-3" data-time="205">
            <div class="dhikr-item"><div class="heart-btn" onclick="toggleHeart(this)"><div class="heart-icon"></div></div><span class="dhikr-text">๐ผ ุฃุณุชุบูุฑ ุงููู ร100</span></div>
            <div class="dhikr-item"><div class="heart-btn" onclick="toggleHeart(this)"><div class="heart-icon"></div></div><span class="dhikr-text">๐ผ ุฃุณุชุบูุฑ ุงููู ุงูุนุธูู ุงูุฐู ูุง ุฅูู ุฅูุง ูู ุงูุญู ุงููููู ู ุฃุชูุจ ุฅููู. ร3</span></div>
            <div class="dhikr-item"><div class="heart-btn" onclick="toggleHeart(this)"><div class="heart-icon"></div></div><span class="dhikr-text">๐ผ ูุง ุฅูู ุฅูุง ุฃูุช ุณุจุญุงูู ุฅูู ููุช ูู ุงูุธุงูููู ร3</span></div>
            <div class="dhikr-item"><div class="heart-btn" onclick="toggleHeart(this)"><div class="heart-icon"></div></div><span class="dhikr-text">๐ผ ุณูุฏ ุงูุฅุณุชุบูุงุฑ: ุงูููู ุฃูุช ุฑุจู ูุง ุฅูู ุฅูุง ุฃูุช ุฎููุชูู ูุฃูุง ุนุจุฏูุ ูุฃูุง ุนูู ุนูุฏู ููุนุฏู ูุง ุงุณุชุทุนุชุ ุฃุนูุฐ ุจู ูู ุดุฑ ูุง ุตูุนุชุ ุฃุจูุก ูู ุจูุนูุชู ุนููุ ูุฃุจูุก ุจุฐูุจู ูุงุบูุฑ ูู ูุฅูู ูุง ูุบูุฑ ุงูุฐููุจ ุฅูุง ุฃูุช.</span></div>
            <div class="dhikr-item"><div class="heart-btn" onclick="toggleHeart(this)"><div class="heart-icon"></div></div><span class="dhikr-text">๐ผ ุงูููู ุฅูู ุฃุณุฃูู ูุง ุงูููุ ุงููุงุญุฏ ุงูุฃุญุฏ ุงูุตูุฏุ ุงูุฐู ูู ููุฏ ููู ููููุฏุ ููู ููู ูู ููููุง ุฃุญุฏ - ุฃู ุชุบูุฑ ูู ุฐููุจูุ ุฅูู ุฃูุช ุงูุบููุฑ ุงูุฑุญูู.</span></div>
            <div class="dhikr-item"><div class="heart-btn" onclick="toggleHeart(this)"><div class="heart-icon"></div></div><span class="dhikr-text">๐ผ {ุฑุจ ุงุบูุฑ ู ุงุฑุญู ู ุฃูุช ุฎูุฑ ุงูุฑุงุญููู}</span></div>
        </div>
        <div class="mission-card" id="mission-4" data-time="174">
            <div class="dhikr-item"><div class="heart-btn" onclick="toggleHeart(this)"><div class="heart-icon"></div></div><span class="dhikr-text">๐ผ ุญุณุจู ุงููู ูุง ุฅูู ุฅูุง ูู ุนููู ุชูููุช ู ูู ุฑุจ ุงูุนุฑุด ุงูุนุธูู ร7</span></div>
            <div class="dhikr-item"><div class="heart-btn" onclick="toggleHeart(this)"><div class="heart-icon"></div></div><span class="dhikr-text">๐ผ ยซุฅูุง ูุชุญูุง ูู ูุชุญุง ูุจููุงยป ร21</span></div>
            <div class="dhikr-item"><div class="heart-btn" onclick="toggleHeart(this)"><div class="heart-icon"></div></div><span class="dhikr-text">๐ผ ุงููุงุชุญุฉ</span></div>
            <div class="dhikr-item"><div class="heart-btn" onclick="toggleHeart(this)"><div class="heart-icon"></div></div><span class="dhikr-text">๐ผ ุจูุณููู ุงูููู ุฃูุฑูููู ููููุณููุ ูููู ููููู ุดูููุกู ููุคูุฐูููููุ ูููู ุดูุฑูู ููููู ููููุณู ุฃููู ุนููููู ุญูุงุณูุฏูุ ุงูููู ููุดูููููููุ ุจูุณููู ุงูููู ุฃูุฑูููู ููููุณูู. ร3</span></div>
            <div class="dhikr-item"><div class="heart-btn" onclick="toggleHeart(this)"><div class="heart-icon"></div></div><span class="dhikr-text">๐ผ ุณูุงู ูููุง ูู ุฑุจ ุฑุญูู ร19</span></div>
        </div>
        <div class="mission-card" id="mission-5" data-time="235">
            <div class="dhikr-item"><div class="heart-btn" onclick="toggleHeart(this)"><div class="heart-icon"></div></div><span class="dhikr-text">๐ผ ยซุงููู ูุทูู ุจุนุจุงุฏู ูุฑุฒู ูู ูุดุงุก ู ูู ุงูููู ุงูุนุฒูุฒยป ูุง ูุทูู ร129</span></div>
            <div class="dhikr-item"><div class="heart-btn" onclick="toggleHeart(this)"><div class="heart-icon"></div></div><span class="dhikr-text">๐ผ [ุงูููู ูุง ูู ูุทูุช ุจุฎูู ุงูุณูุงูุงุช ู ุงูุฃุฑุถุ ู ูุทูุช ุจุงูุฃุฌูุฉ ูู ุจุทูู ุฃููุงุชูุงุ ุงูุทู ุจูุง ูู ูุถุงุฆู ู ูุฏุฑูุ ูุทูุง ูููู ุจูุฑูู ูุง ุฃุฑุญู ุงูุฑุงุญููู. ุงูููู ุจุณุฑ ุงุณูู ุงููุทูู ุฃุฏุฎููุง ุฏุงุฆุฑุฉ ุงููุทู ู ุงูุญูุธ ู ุงููุฌุงุฉ ู ุงูุฃูุงู ูุง ูุทููุ ุงูููู ูุง ูุทูู ุจุณุฑ ุงุณูู ุงููุทูู ู ุฌุงู ูุจูู ุงูุดุฑูู ุงูุทู ุจูุง ูุทูุง ุฎููุง ูู ุฏูุงุฆู ูุทูู ุงูุฎููุ ุงูุฐู ุฅุฐุง ูุทูุช ุจู ูุนุจุฏ ููู]</span></div>
            <div class="dhikr-item"><div class="heart-btn" onclick="toggleHeart(this)"><div class="heart-icon"></div></div><span class="dhikr-text">๐ผ [ุงูููู ูุง ูุฑุฌ ุฅูุง ูุฑุฌูุ ููุง ูุทู ุฅูุง ูุทููุ ูุง ูู ูุณุน ูุทูู ุฃูู ุงูุณูุงูุงุช ู ุงูุฃุฑุถุ ุฃุณุฃูู ุจูุทูู ุฃู ุชุฎูููู ุนู ุฃุนูู ุงูุธููุฉ ู ุงููุชุฌุจุฑููุ ู ูุฑุฏุฉ ุงูุฌู ู ุงูุดูุงุทูู. ุงูููู ุจุณุฑ ุงุณูู ุงููุทูู ุงูุทู ุจู ูู ุงูุฃููุฑ ูููุง ู ุงุณูู ุจู ูุณุงูู ุงููุฌุงุฉุ ู ูู ูู ุงูููู ูุง ูุทูู ูุทููุง ู ูููุง ู ูุนููุง ู ูุตูุฑุง ูู ุฌููุน ุงูุฃููุงู ู ุงูุฃุญูุงู ู ุงูุฃูุนุงูุ ู ุงุฑุฒููู ูู ุงูุฎูุฑ ููู ุนุงุฌูู ู ุขุฌููุ ู ุงุตุฑู ุนูู ุงูููู ุงูููุฑ ู ุงูุดุฑ ููู ุนุงุฌูู ู ุขุฌูู ูุง ูุทูู. ุงูููู ูุง ุฐุง ุงูุฌูุงู ู ุงูุฅูุฑุงู ุจุญุฑูุฉ ูุฌูู ุงููุฑููุ ู ุนุธูุฉ ูููู ุงูุนุธููุ ู ุณุฑ ุงุณูู ุงููุทูู ุณุฎุฑูู ุนุจุฏู ุฎุงุฏู ูุฐุง ุงูุฅุณู ุงูุดุฑููุ ูููู ูู ุนููุง ุนูู ูุง ุฃุฑูุฏ ูู ุฃููุฑ ุงูุฏููุง ู ุงูุขุฎุฑุฉ. ุงูููู ุฅูู ุฃุณุฃูู ุจุฃูุถู ูุณุฃูุชูุ ู ุจุฃุญุจ ุฃุณูุงุฆุฆู ุฅูููุ ู ุฃูุฑููุง ุนูููุ ู ุจูุง ูููุช ุนูููุง ุจุณูุฏูุง ูุญูุฏ ูุจููุง ุตู ุงูููู ุนููู ู ุณููุ ูุฃุณุฃูู ุจุฌูุงู ู ุฌูู ู ููุฑ ุนุธูุชูุ ู ุจุณุฑ ุงุณูู ุงููุทูู ุฃู ุชูุดู ูู ุดููุน ุงูุฐูุจ ู ู ุชุจูููุง ูู ูุจู ุฃูุงููุง ูุฃุฑุงูุง ุนูุงูุง ุจูุงูุง ูุง ูุทูู ูุง ูุจููุ ู ุงูุชุญ ูู ุงูููู ูู ุชุฏุงููู ูุชุญุง ุนุธููุงุ ู ุงุฑุฒููู ููู ูุงูุง ูุซูุฑุง ุบุฒูุฑุง ูุง ุงูุชูุงุก ูู ู ูุง ุงููุถุงุก. ู ุณุฎุฑ ูู ุงูููู ุฌููุน ุฎููู ู ุชูููู ูุคููุง ูุณููุง ูุญุณูุงุ ูุง ูู ูุงู ู ูููู ุงูุญู ยซุงุฏุนููู ุฃุณุชุฌุจ ูููยป ุฏุนูุชู ุงูููู ุฑุจู ู ุฃูุง ุงููุณุชุฌูุฑ ุจู ุงููููุฑ ุฅูููุ ูุงุณุชุฌุจ ููู ุฑุญูุฉุ ู ุฃุนุทูู ุณุคูู ุฌูุฏุง ู ูุฑูุง ู ูุทูุงุ ู ุฃูุช ุงูุฑุญูุงู ุงูุฑุญููุ ุงููุทูู ุจูู ุงูุนุจุงุฏุ ุฅูู ูุง ุชุฎูู ุงูููุนุงุฏ]</span></div>
        </div>
        <div class="mission-card" id="mission-6" data-time="845">
            <div class="dhikr-item"><div class="heart-btn" onclick="toggleHeart(this)"><div class="heart-icon"></div></div><span class="dhikr-text">๐ผ ุงูุตูุงุฉ ุงููุงููุงุฆูุฉ </span></div>
            <div class="dhikr-item"><div class="heart-btn" onclick="toggleHeart(this)"><div class="heart-icon"></div></div><span class="dhikr-text">๐ผ ูุง ุฅูู ุฅูุง ุงููู ร100</span></div>
            <div class="dhikr-item"><div class="heart-btn" onclick="toggleHeart(this)"><div class="heart-icon"></div></div><span class="dhikr-text">๐ผ ูุง ุฅูู ุฅูุง ุงูููุ ุฏุงุฆูุฉ ุจุฏูุงู ููู ุงูููุ ุนุฏุฏ ูุง ูู ุนูู ุงููู ู ุฑุถู ููุณูุ ู ุฒูุฉ ุนุฑุด ุงููู ู ูุฏุงุฏ ูููุงุชู. ร3</span></div>
            <div class="dhikr-item"><div class="heart-btn" onclick="toggleHeart(this)"><div class="heart-icon"></div></div><span class="dhikr-text">๐ผ ุณุจุญุงู ุงููู ู ุจุญูุฏู ร20</span></div>
            <div class="dhikr-item"><div class="heart-btn" onclick="toggleHeart(this)"><div class="heart-icon"></div></div><span class="dhikr-text">๐ผ 2ุณุจุญุงู ุงููู ู ุจุญูุฏู ุณุจุญุงู ุงููู ุงูุนุธูู 0</span></div>
            <div class="dhikr-item"><div class="heart-btn" onclick="toggleHeart(this)"><div class="heart-icon"></div></div><span class="dhikr-text">๐ผ ุณุจุญุงู ูู ูููู ููุดูุก ูู ููููู 20</span></div>
            <div class="dhikr-item"><div class="heart-btn" onclick="toggleHeart(this)"><div class="heart-icon"></div></div><span class="dhikr-text">๐ผ ุณุจุญุงู ุฐู ุงูููู ู ุงูููููุช ร20</span></div>
            <div class="dhikr-item"><div class="heart-btn" onclick="toggleHeart(this)"><div class="heart-icon"></div></div><span class="dhikr-text">๐ผ ุณุจุญุงู ุงููู ู ุจุญูุฏูุ ุนุฏุฏ ุฎููู ู ุฑุถุง ููุณูุ ู ุฒูุฉ ุนุฑุดู ู ูุฏุงุฏ ูููุงุชู ร3</span></div>
            <div class="dhikr-item"><div class="heart-btn" onclick="toggleHeart(this)"><div class="heart-icon"></div></div><span class="dhikr-text">๐ผ ุณุจุญุงู ุงูููุ ู ุงูุญูุฏ ูููุ ู ูุง ุฅูู ุฅูุง ุงูููุ ู ุงููู ุฃูุจุฑุ ุนุฏุฏ ูุง ุฎููุ ู ููุก ูุง ุฎููุ ู ุนุฏุฏ ูุง ูู ุงูุฃุฑุถ ูุงูุณูุงุกุ ู ููุก ูุง ูู ุงูุฃุฑุถ ูุงูุณูุงุกุ ู ุนุฏุฏ ูุง ุฃุญุตู ูุชุงุจูุ ู ููุก ูุง ุฃุญุตู ูุชุงุจูุ ู ุนุฏุฏ ูู ุดูุกุ ู ููุก ูู ุดูุก.</span></div>
        </div>
        <div class="mission-card" id="mission-7" data-time="1220">
            <div class="dhikr-item"><div class="heart-btn" onclick="toggleHeart(this)"><div class="heart-icon"></div></div><span class="dhikr-text">๐ผ ุญุณุจู ุงููู ู ูุนู ุงููููู ร20</span></div>
            <div class="dhikr-item"><div class="heart-btn" onclick="toggleHeart(this)"><div class="heart-icon"></div></div><span class="dhikr-text">๐ผ ูุง ุญูู ู ูุง ููุฉ ุฅูุง ุจุงููู ร20</span></div>
            <div class="dhikr-item"><div class="heart-btn" onclick="toggleHeart(this)"><div class="heart-icon"></div></div><span class="dhikr-text">๐ผ ูุง ุฅูู ุฅูุง ุงููู ูุญุฏู ูุง ุดุฑูู ููุ ูู ุงูููู ู ูู ุงูุญูุฏ ู ูู ุนูู ูู ุดูุก ูุฏูุฑ ร10</span></div>
            <div class="dhikr-item"><div class="heart-btn" onclick="toggleHeart(this)"><div class="heart-icon"></div></div><span class="dhikr-text">๐ผ ูุง ุฐุง ุงูุฌูุงู ู ุงูุฅูุฑุงู ร50</span></div>
            <div class="dhikr-item"><div class="heart-btn" onclick="toggleHeart(this)"><div class="heart-icon"></div></div><span class="dhikr-text">๐ผ ุงูููู ุฅูู ุฃุณุฃูู ุฃูู ุฃูุช ุงูููุ ูุง ุฅูู ุฅูุง ุฃูุช ูุญุฏู ูุง ุดุฑูู ููุ ู ุฃูุช ุนูู ูู ุดูุก ูุฏูุฑุ ู ุฃุชูุณู ุฅููู ุจุฃุณูุงุฆู ุงูุญุณูู: ุงูููุ ุงููููุ ุงูุตูุฏ. ุงููุงูุนุ ุงููุทููุ ุงูุนูู. ุงูุญูุ ุงูููููุ ูุงูู ุงูููู ุฐู ุงูุฌูุงู ู ุงูุฅูุฑุงูุ ุฃู ุชูุจุณูู ูุจุงุณ ุญูุธ ูููู ูู ุจุฑุญูุชู ุฐุฑุนุง ู ูุงููุง ู ุญุฌุงุจุง ูู ูู ุฃุฐู ู ุถุฑุฑ ู ุดุฑุ ู ูู ูู ุทูุงุฑู ุงูููู ู ุงูููุงุฑ ุฅูุง ุทุงุฑูุง ูุทุฑู ุจุฎูุฑุ ูู ูุฐู ุงูุณุงุนุฉ ู ูู ุณุงุนุฉ ุฅูู ููุงู ุงูุณุงุนุฉ ุจุฑุญูุชู ุงูููู ูุง ุฃุฑุญู ุงูุฑุงุญููู.</span></div>
            <div class="dhikr-item"><div class="heart-btn" onclick="toggleHeart(this)"><div class="heart-icon"></div></div><span class="dhikr-text">๐ผ ุงูููู ุฅูู ุฃุณุชุฎูุฑูุ ู ุฃุณุชูุฏุฑู ุจูุฏุฑุชู ู ุฃุณุฃูู ูู ูุถููุ ุฅูู ุนูู ูู ุดูุก ูุฏูุฑ ู ุฃูุช ุนูุงู ุงูุบููุจุ ุฃุณุฃูู ุงูููู ุฅู ูุงู ูุงูููู ูู ูู ูุฐุง ุงูููุงุฑ ู ูุฐู ุงููููุฉุ ุฎูุฑุง ูู ูุงูุฏุฑู ููุ ู ูุณุฑู ููุ ุซู ุจุงุฑู ูู ููู ู ุฃุนูู ุนูููุ ู ูุง ูุงู ุดุฑูุง ูู ูุงุตุฑูู ุนููุ ู ุงุตุฑููู ุนููุ ู ุงูุฏุฑ ูู ุงูุฎูุฑ ุญูุซ ูุงูุ ุซู ุฑุถูู ุจู. ุจุฑุญูุชู ุงูููู ูุง ุฃุฑุญู ุงูุฑุงุญููู.</span></div>
            <div class="dhikr-item"><div class="heart-btn" onclick="toggleHeart(this)"><div class="heart-icon"></div></div><span class="dhikr-text">๐ผ ูุง ุญู ูุง ูููู ุจุฑุญูุชู ุฃุณุชุบูุซุ ุฃุตูุญ ูู ุดุฃูู ููู ู ูุง ุชูููู ุฅูู ููุณู ุฃู ุฅูู ุฃุญุฏ ูู ุฎููู ุทุฑูุฉ ุนูู.</span></div>
            <div class="dhikr-item"><div class="heart-btn" onclick="toggleHeart(this)"><div class="heart-icon"></div></div><span class="dhikr-text">๐ผ ุณูุฑุฉ ุงูุฅุฎูุงุต ร3</span></div>
            <div class="dhikr-item"><div class="heart-btn" onclick="toggleHeart(this)"><div class="heart-icon"></div></div><span class="dhikr-text">๐ผ ุงููุฑุขู ู ุซูู</span></div>
            <div class="dhikr-item"><div class="heart-btn" onclick="toggleHeart(this)"><div class="heart-icon"></div></div><span class="dhikr-text">๐ผ ุงูุญูุฏ ููู ร100</span></div>
            <div class="dhikr-item"><div class="heart-btn" onclick="toggleHeart(this)"><div class="heart-icon"></div></div><span class="dhikr-text">๐ผ ยซุฑูุจููููุง ููุง ุชูุฒูุบู ูููููุจูููุง ุจูุนูุฏู ุงูููุฏูููุชูููุง ููููุจู ููููุง ููู ูููุฏูููู ุฑูุญูููุฉู ุงูููููู ุฃููุชู ุงูฌููููููุงุจูยป</span></div>
        </div>
        <button id="khatm-trigger-btn" onclick="showKhatm()">ุฃุชููุช ุงููุฑุฏ (ุฏุนุงุก ุงูุฎุชู)</button>
    </div>

    <div id="khatm-modal">
        <div class="khatm-content">
            <div class="khatm-title">๐ผ ุฏุนุงุก ุงูุฎุชู</div>
            <div class="khatm-text">
                ุงูููู ุฅูู ุฃุณุฃูู ุฃู ุชุตูู ู ุชุณูู ู ุชุจุงุฑู ุนูู ุณูุฏูุง ูุญูุฏ ูู ูู ููุช ู ุญููุ ุฅูู ุฃู ุชุฑุซ ุงูููู ุงูุฃุฑุถ ู ูู ุนูููุง ู ุฃูุช ุฎูุฑ ุงููุงุฑุซูู. <br><br>
                ุงูููู ุฅูู ุฃุณุฃูู ุญุณู ุงูุฎููู ู ุงูุญููู ู ุงูุฃุฏุจู ู ุงูููููุ ู ุงูุตุฏูู ู ุงูุฅุฎูุงุตู ู ุงูุนูู ู ุงูุนุงููุฉ ู ุงููููููุ ู ุงูุชูููู ู ุงููุชุญ ุงููุจููู ูู ุฃููุฑ ุงูุฏููุง ู ุงูุฏููู ุจุฌุงู ุณูุฏูุง ูุญูุฏ ุฃุดุฑู ุงูุฃูุจูุงุก ู ุงููุฑุณููู. ู ุฃุนูุฐ ุจู ูู ุงูุดุฑู ู ุงููุจุฑ ู ุงูุฑูุงุกุ ู ุงูุนุฌุฒ ู ุงูููุฑ ู ุงููุงูุฉ ู ุงููุฑุงุกุ ู ุณูุก ุงูุฃุฎูุงู ู ุงูุบูุธุฉ ู ุงููุธุงุธุฉ ู ุงูููุงู. ุงูููู ุงุฑุฒููู ู ูุงูุฏู ู ุฃุฎูุงุชู ูู ุงูุฎูุฑ ููู ุนุงุฌูู ู ุขุฌููุ ู ุงุตุฑู ุนูุง ุจุฑุญูุชู ูุง ุฃุฑุญู ุงูุฑุงุญููู ุงูุดุฑ ููู ุนุงุฌูู ู ุขุฌููุ ุงูููู ุฅูุง ูุณุฃูู ูู ูุฌุงุกุฉ ุงูุฎูุฑุ ู ูุนูุฐ ุจู ูู ูุฌุงุกุฉ ุงูุดุฑ ู ุฃูู ุงูุดูุงูุฉ ู ุงูุดุฑ ู ุงูุฎุฏุงุน ู ุงูููุฑ.<br><br>
                ุงูููู ูุง ููุงุฑ ุงููุฑ ุฌููุน ุฃุนุฏุงุฆู ูุญุณุงุฏู ูููุชูุนูุง ุนูู ุจููุฑู ูุง ููุงุฑุ ู ูููู ูู ุฃุฑุงุฏูู ุจุณูุก ูุงุญูุธูู ุงูููู ูู ุดุฑูุ ู ุฑุฏ ููุฏู ูู ูุญุฑูุ ูุงุดุบูู ุนูู ูู ูุญุธุชู ุจุงููุฑุฏุฉ ู ุจุงูุทูุงุฑู ู ุจููุณูุ ู ุฃูุจูู ูู ุฃุฎูุต ูุฏููู ุฅูู ุฑุฃุณู.<br><br>
                ุงูููู ุฅูู ุฃุณุชุดูุน ุฅููู ุจุณูุฏูุง ูุญูุฏ ุฅุฐ ูู ุฃูุฌู ุงูุดูุนุงุก ุฅูููุ ู ุฃูููุณููู ุจู ุนููู ุฅุฐ ูู ุฃุนุธู ูู ุฃูุณู ุจุญูู ุนูููุ ู ุฃุชูุณู ุจู ุฅููู ุฅุฐ ูู ุฃูุฑุจ ุงููุณุงุฆู ุฅูููุ ูุง ุฑุจ ุจุฌุงู ูุจูู ุงููุตุทูู ู ูุฏุฑู ุนูุฏู ู ููุงูุชู ูุฏูู ูุฑุฌ ุนูู ูุง ุฃูุง ูููุ ู ูุง ุชุฌุนู ุนูุดู ูุฏุงุ ู ูุจ ูู ุงูุฑุฒู ุงูุณูู ุงูุฐู ูุง ูุดูุฉ ููู ู ูุง ุชุนุจุ ู ูุณุฑ ูู ุฃููุฑู ูููุง ู ุงูุถ ูู ุญูุงุฆุฌู ุฌููุนูุง ู ุงุฑุฒููู ูุญุจุชู ู ุงุฌุนู ูู ูู ุงูุณูุงูุงุช ู ุงูุฃุฑุถ ุงููุจููุ ู ุณุฎุฑ ูู ุฌููุน ุฎูููุ ู ุชูุจู ููู ุจุฑุญูุชู ู ุนููู ู ุฌูุฏู ู ูุฑูู ุงูููู ูุง ุฃูุฑู ุงูุฃูุฑููู.<br><br>
                ู ุตู ุงูููู ู ุณูู ู ุจุงุฑู ุนูู ุณูุฏูุง ูุญูุฏ ูู ูู ููุช ู ุญูู ุฅูู ุฃู ุชุฑุซ ุงูููู ุงูุฃุฑุถ ู ูู ุนูููุง ู ุฃูุช ุฎูุฑ ุงููุงุฑุซูู.<br><br>
                ุณุจุญุงู ุฑุจู ุฑุจ ุงูุนุฒุฉ ุนูุง ูุตููู ู ุณูุงู ุนูู ุงููุฑุณููู ู ุงูุญูุฏ ููู ุฑุจ ุงูุนุงูููู.
            </div>
            <button class="khatm-close-btn" onclick="closeKhatm()">ุชูุจู ุงููู ูููู</button>
        </div>
    </div>

    <div id="dashboard-view">
        <div style="border:2px solid black; padding:5px 20px; border-radius:30px; display:flex; align-items:center; gap:10px;">
            <div id="rank-num" style="width:28px; height:28px; border-radius:50%; border:1px solid black; display:flex; align-items:center; justify-content:center; font-weight:bold;">1</div>
            <span id="rank-name" style="font-weight:bold;">ูุจุชุฏุฆ</span>
        </div>
        <p>ุงูููุท: <span id="total-pts">0</span> / <span id="target-pts">40</span></p>
        <div class="grid" id="grid-container"></div>
        <div class="tehlil-box">
            <div class="tehlil-stat">ุงูุชูููู ุงููุทููุจ: <span id="target-tehlil">10,000</span></div>
            <div class="tehlil-stat" style="color:#d4af37;">ุงูุชูููู ุงูุชุฑุงููู: <span id="accumulated-tehlil">0</span></div>
            <div id="daily-progress-bar"><div class="progress-inner" id="prog-inner"></div></div>
            <div style="margin-top:12px;">
                <input type="number" id="tehlil-input" style="width:90px; padding:8px; border-radius:10px; border:1px solid #ccc;">
                <button onclick="addManualTehlil()" style="background:var(--gold); color:white; border:none; padding:8px 15px; border-radius:10px;">ุฅุถุงูุฉ</button>
            </div>
        </div>
        <button onclick="toggleGuide(true)" class="mini-start-btn" style="font-size:1rem; padding:10px 30px; margin-top:10px;">ุฏููู ุงูููุงูุงุช</button>
        <button onclick="location.reload()" style="color:blue; background:none; border:none; cursor:pointer; margin-top:10px;">ุงูุนูุฏุฉ ููุจุฏุงูุฉ</button>
    </div>

    <div id="guide-modal">
        <div class="guide-content">
            <div class="guide-header-top">ูุฑุงุชุจ ุงูุณููู ูููุงูุงุช ุงููููู</div>
            
            <div class="rank-section">
                <div class="guide-item" data-rank="0">
                    <div class="guide-blur-container">
                        <h3>1. ููุงู ุงููุจุชุฏุฆ (ุนุชุจุฉ ุงูุฅุฑุงุฏุฉ)</h3>
                        <div class="guide-body">
                            <p class="guide-desc">ูู ููุงู ูู ูุถุน ูุฏูู ุฃูู ุงูุทุฑููุ ููุณุนู ูุถุจุท ุฌูุงุฑุญู ุงูุธุงูุฑุฉ ูุจูุงุก ุฌุณูุฑ ูู ุงูุฃููุงุฑ ูู ููุจู ูู ุฎูุงู ุงููุฏุงููุฉ ุนูู ุงููุฑุฏ ุงููููู. ูู ููุงู ุงูุชูุจุฉ ุงููุตูุญ ูุงูุงููุทุงุน ุนู ูุถูู ุงูููุงู ูุงููุธุฑุ ูุงูุญุฑุต ุงูุชุงู ุนูู ุงููุฑุงุฆุถ.</p>
                            <div class="guide-rules"><span class="rule-chip">ุงูููุงุท: 40</span><span class="rule-chip">ุงูุชูููู: 10,000</span><span class="rule-chip">ุงูุฃุฏูู: 500</span></div>
                            <span class="guide-section-title">๐ ุนุจุงุฏุงุช ุถุฑูุฑูุฉ:</span>
                            <div class="essential-box">ุงูุฅุณุชุบูุงุฑ 100ุ ุงูุตูุงุฉ ุนูู ุงููุจู 100ุ ุงูููุงูู ุงูุดูุน ู ุงููุชุฑุ ุงููุฑุขู ุญุฒุจ ูุงุญุฏ.</div>
                            <span class="guide-section-title">โจ ููุฌุจุงุช ุงูุชุฑูู:</span>
                            <div class="pos-list">ุงูุตุฏู ูู ุงูุทูุจุ ุจุฑ ุงููุงูุฏููุ ูุซุฑุฉ ุงููุถูุกุ ูุงููุญุงูุธุฉ ุงูุตุงุฑูุฉ ุนูู ุงูุตูุงุฉ ูู ููุชูุง.</div>
                            <span class="guide-section-title">โ๏ธ ููุงูุน ุงูุชุฑูู:</span>
                            <div class="neg-list">ุงูุชุณูููุ ูุถูู ุงูููุงูุ ูุซุฑุฉ ุงููููุ ูุงูุบูุจุฉ ูุงูููููุฉ.</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="rank-section">
                <div class="guide-item" data-rank="1">
                    <div class="lock-message">ุฃููู ุงูููุงู ุงูุฐู ูุจูู ูุชูุชุญ ุงูููู</div>
                    <div class="guide-blur-container">
                        <h3>2. ููุงู ุงููุฑูุฏ (ุตูุงุก ุงููุตุฏ)</h3>
                        <div class="guide-body">
                            <p class="guide-desc">ุชุชููุฏ ููู ุงูุฅุฑุงุฏุฉ ุงูุญููููุฉ ุงูุชู ุชุทูุจ ุงููู ูุฐุงุชู ูุง ูุบุฑุถ ุณูุงู. ูุจุฏุฃ ููู ุงููุฑูุฏ ุจุชุฐูู ุญูุงูุฉ ุงูุฐูุฑ ูุชููุดู ูู ุจุนุถ ุขูุงุช ููุณู ุงูุฎููุฉุ ููุนูู ุนูู ุชุทููุฑ ุจุงุทูู ุจููุฑ ุงูุตูุงุฉ ุนูู ุงููุจู ๏ทบ ูุงูุงุดุชุบุงู ุจุงูุจุงุทู ุฃูุซุฑ ูู ุงูุธุงูุฑ.</p>
                            <div class="guide-rules"><span class="rule-chip">ุงูููุงุท: 100</span><span class="rule-chip">ุงูุชูููู: 50,000</span><span class="rule-chip">ุงูุฃุฏูู: 1,000</span></div>
                            <span class="guide-section-title">๐ ุนุจุงุฏุงุช ุถุฑูุฑูุฉ:</span>
                            <div class="essential-box">ุงูุฅุณุชุบูุงุฑ 200ุ ุงูุตูุงุฉ ุนูู ุงููุจู 200ุ ุงูููุงูู: ุฑูุนุชู ุงูุถุญูุ ุงููุฑุขู 2 ุฃุญุฒุงุจุ ุงูุจุงููุงุช ุงูุตุงูุญุงุช ุจุนุฏ ุงูุตูุงุฉ.</div>
                            <span class="guide-section-title">โจ ููุฌุจุงุช ุงูุชุฑูู:</span>
                            <div class="pos-list">ุญุถูุฑ ุงูููุจ ุงูุชุงูุ ูุซุฑุฉ ุงูุตูุงุฉ ุนูู ุงููุจู ุจุตุฏูุ ุบุถ ุงูุจุตุฑุ ูุญุจ ุงูุฎูุฑ ูุนููู ุงูุฎูู.</div>
                            <span class="guide-section-title">โ๏ธ ููุงูุน ุงูุชุฑูู:</span>
                            <div class="neg-list">ุงูุฑูุงุก ุงูุฎููุ ุญุจ ุงูุธููุฑ ูุงููุฏูุญุ ุงูุฅุนุฌุงุจ ุจุงูููุณุ ููุฌุงูุณุฉ ุฃูู ุงูุบููุฉ.</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="rank-section">
                <div class="guide-item" data-rank="2">
                    <div class="lock-message">ุฃููู ุงูููุงู ุงูุฐู ูุจูู ูุชูุชุญ ุงูููู</div>
                    <div class="guide-blur-container">
                        <h3>2. ููุงู ุงูุณุงูู (ูุฌุงูุฏุฉ ุงูุจุงุทู)</h3>
                        <div class="guide-body">
                            <p class="guide-desc">ูู ููุงู ุงูุฌุฏ ูุงูุนูู ุงูุฏุคูุจุ ุญูุซ ูุตุจุญ ุงููุฑุฏ ูู ุงูุบุฐุงุก ุงูุญูููู ููุฑูุญ. ูุดุชุฏ ููู ุงูุซุจุงุช ูุชุธูุฑ ููู ุซูุงุฑ ุงูุตุจุฑ ูุงูุฑุถุง ุงูุชุงู ุนู ุงููู ูู ูู ุญุงูุ ูุชุฐูุจ ููู ุงูููุณ ุงูุฃูุงุฑุฉ ูู ููุฑ ุงููุฌุงูุฏุฉ ุงููุณุชูุฑุฉ ูุงููุฑุงูุจุฉ.</p>
                            <div class="guide-rules"><span class="rule-chip">ุงูููุงุท: 300</span><span class="rule-chip">ุงูุชูููู: 150,000</span><span class="rule-chip">ุงูุฃุฏูู: 1,000</span></div>
                            <span class="guide-section-title">๐ ุนุจุงุฏุงุช ุถุฑูุฑูุฉ:</span>
                            <div class="essential-box">ุงูุฅุณุชุบูุงุฑ 400ุ ุงูุตูุงุฉ ุนูู ุงููุจู 300ุ ุงูููุงูู ุงููุฌุฑุ ุงููุฑุขู 2 ุฃุญุฒุงุจ.</div>
                            <span class="guide-section-title">โจ ููุฌุจุงุช ุงูุชุฑูู:</span>
                            <div class="pos-list">ุงูุตุจุฑ ุนูู ุงูุทุงุนุฉุ ุงูุฑุถุง ุงููุงูู ุจุงูููุฏูุฑุ ููุงู ุงููููุ ูุงูุชููู ุงูุฐู ูุง ููุชุฒ.</div>
                            <span class="guide-section-title">โ๏ธ ููุงูุน ุงูุชุฑูู:</span>
                            <div class="neg-list">ุงูุดููู ูุบูุฑ ุงูููุ ุงูุบุถุจ ููููุณุ ุญุจ ุงูุฌุงู ูุงููุงูุ ูุงูุชูุตูุฑ ูู ุงููุฑุฏ ูุฃู ุณุจุจ.</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="rank-section">
                <div class="guide-item" data-rank="3">
                    <div class="lock-message">ุฃููู ุงูููุงู ุงูุฐู ูุจูู ูุชูุชุญ ุงูููู</div>
                    <div class="guide-blur-container">
                        <h3>4. ููุงู ุงููุญุจ (ุงูููุงุก ูู ุงููุญุจูุจ)</h3>
                        <div class="guide-body">
                            <p class="guide-desc">ุฃุฑูู ุงูููุงูุงุชุ ุญูุซ ููุชูุฆ ุงูููุจ ุจุดูู ูุง ููุฏุฃ ููุฌุฏ ูุง ูููุทุน. ูุบูุจ ุงููุญุจ ุนู ููุณู ุจุดููุฏ ุฌูุงู ุฑุจูุ ููุตุจุญ ุฐูุฑู ุตูุชุงู ูููุฑู ุฐูุฑุงู. ูู ููุงู ุงููุฑุจ ุงูุฐู ูุง ุชุดูุจู ุดุงุฆุจุฉุ ูููุงู ุงูุชุณููู ุงููุทูู ููู.</p>
                            <div class="guide-rules"><span class="rule-chip">ุงูููุงุท: 600</span><span class="rule-chip">ุงูุชูููู: 500,000</span><span class="rule-chip">ุงูุฃุฏูู: 1,700</span></div>
                            <span class="guide-section-title">๐ ุนุจุงุฏุงุช ุถุฑูุฑูุฉ:</span>
                            <div class="essential-box">ุงูุฅุณุชุบุงุฑ 600ุ ุงูุตูุงุฉ ุนูู ุงููุจู 400ุ ุงูููุงูู ููุงู ููู ุฎูููุ ุงููุฑุขู 3 ุฃุญุฒุงุจ.</div>
                            <span class="guide-section-title">โจ ููุฌุจุงุช ุงูุชุฑูู:</span>
                            <div class="pos-list">ุงูุฃูุณ ุจุงูุฎููุฉ ูุน ุงูููุ ุงููุฑุญ ุงูุฏุงุฆู ุจุงูููุ ุดุฏุฉ ุงูุฃุฏุจ ูุน ุงูุญู ูุงูุฎููุ ูุงูุชููู ุงููุทูู.</div>
                            <span class="guide-section-title">โ๏ธ ููุงูุน ุงูุชุฑูู:</span>
                            <div class="neg-list">ุจูุงุก ุญุจ ุงูุฏููุง ูู ุงูููุจุ ุฅูุดุงุก ุงูุฃุณุฑุงุฑ ุงูุฅูููุฉุ ููุงุญุธุฉ ุงูููุณุ ููุชูุฑ ุงูููุฉ.</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="rank-section">
                <div class="guide-item" data-rank="4">
                    <div class="lock-message">ุฃููู ุงูููุงู ุงูุฐู ูุจูู ูุชูุชุญ ุงูููู</div>
                    <div class="guide-blur-container">
                        <h3>5. ููุงู ุงูุฐุงูุฑ</h3>
                        <div class="guide-body">
                            <p class="guide-desc">ูู ูุฐุง ููุงู ูุตุจุญ ุงููุณุงู ุฑุทุจุงู ุจุฐูุฑ ุงููู ูู ูู ุญููุ ูุชูุชูู ุญูููุฉ ุงูุฐูุฑ ูู ุงููุณุงู ุฅูู ุงูููุจ ุญุชู ูููุถ ุนูู ุงูุฌูุงุฑุญุ ููุตูุฑ ุงูุนุจุฏ ูุฃูู ูุฑู ุงููู ูู ูู ุญุฑูุฉ ูุณููู.</p>
                            <div class="guide-rules"><span class="rule-chip">ุงูููุงุท: 1000</span><span class="rule-chip">ุงูุชูููู: 1,000,000</span><span class="rule-chip">ุงูุฃุฏูู: 2,500</span></div>
                            <span class="guide-section-title">๐ ุนุจุงุฏุงุช ุถุฑูุฑูุฉ:</span>
                            <div class="essential-box">ุงูุฅุณุชุบูุงุฑ 800ุ ุงูุตูุงุฉ ุนูู ุงููุจู 500ุ ุงูููุงูู ุงูุฑูุงุชุจ (12 ุฑูุนุฉ)ุ ุงููุฑุขู 3 ุฃุญุฒุงุจ.</div>
                            <span class="guide-section-title">โจ ููุฌุจุงุช ุงูุชุฑูู:</span>
                            <div class="pos-list">ุฏูุงู ุงูุฐูุฑ ุงูููุจูุ ุงููุฑุงูุจุฉุ ุงูุชูุงุถุนุ ููุณุงุนุฏุฉ ุงูุขุฎุฑูู ุณุฑุงู.</div>
                            <span class="guide-section-title">โ๏ธ ููุงูุน ุงูุชุฑูู:</span>
                            <div class="neg-list">ุงูุบููุฉ ุจุนุฏ ุงูุฐูุฑุ ุงูุนุฌุจ ุจุงูุนููุ ูุงูุชุฏุฎู ูููุง ูุง ูุนูู.</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="rank-section">
                <div class="guide-item" data-rank="5">
                    <div class="lock-message">ุฃููู ุงูููุงู ุงูุฐู ูุจูู ูุชูุชุญ ุงูููู</div>
                    <div class="guide-blur-container">
                        <h3>6. ููุงู ุงููุงูุช</h3>
                        <div class="guide-body">
                            <p class="guide-desc">ูู ููุงู ุทูู ุงูููุงู ูุงูุฎุดูุน ูููุ ุญูุซ ูุณุชูุฑ ุงูุนุจุฏ ูู ุนุจูุฏูุฉ ุฏุงุฆูุฉ. ูุชููุฒ ุจุงูุฎุถูุน ุงูุชุงู ูุงูุณููู ุชุญุช ูุฌุงุฑู ุงูุฃูุฏุงุฑุ ูุน ููุถ ูู ุงูุฃููุงุฑ ุงูููุจูุฉ ูุงูุณูููุฉ ุงูุฑุจุงููุฉ.</p>
                            <div class="guide-rules"><span class="rule-chip">ุงูููุงุท: 2000</span><span class="rule-chip">ุงูุชูููู: 2,500,000</span><span class="rule-chip">ุงูุฃุฏูู: 5,000</span></div>
                            <span class="guide-section-title">๐ ุนุจุงุฏุงุช ุถุฑูุฑูุฉ:</span>
                            <div class="essential-box">ุงูุฅุณุชุบูุงุฑ 900ุ ุงูุตูุงุฉ ุนูู ุงููุจู 600ุ ุงูููุงูู ููุงู ููู ุงูุณูุฉุ ุงููุฑุขู 4 ุฃุญุฒุงุจ.</div>
                            <span class="guide-section-title">โจ ููุฌุจุงุช ุงูุชุฑูู:</span>
                            <div class="pos-list">ุงูุฅุฎูุงุต ุงููุญุถุ ุทูู ุงููููุชุ ูุชูุงู ุงูุญุงูุ ูุงูุฒูุฏ ูู ูุฏุญ ุงูุฎูู.</div>
                            <span class="guide-section-title">โ๏ธ ููุงูุน ุงูุชุฑูู:</span>
                            <div class="neg-list">ุฑุคูุฉ ุงูููุณ ูู ุงูุทุงุนุฉุ ุงููุชูุฑ ูู ุงูููุงูุ ูุถุนู ุงููููู.</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="rank-section">
                <div class="guide-item" data-rank="6">
                    <div class="lock-message">ุฃููู ุงูููุงู ุงูุฐู ูุจูู ูุชูุชุญ ุงูููู</div>
                    <div class="guide-blur-container">
                        <h3>7. ููุงู ุงูุฑุจุงูู</h3>
                        <div class="guide-body">
                            <p class="guide-desc">ุฃุนูู ูุฑุงุชุจ ุงูุชุญููุ ุญูุซ ูุตุจุญ ุงูุนุจุฏ ุฑุจุงููุงู ุจูุง ุนูู ูุนูู ูุนููู. ูู ููุงู ุงูุดููุฏ ุงูุฏุงุฆู ูุงูุงุตุทูุงุน ููุญูุ ุญูุซ ูููู ุงููู ุณูุนู ูุจุตุฑูุ ูุชุธูุฑ ุนููู ุขุซุงุฑ ุงูููุงูุฉ ุงููุจุฑู ุจุตุฏู ุงูููู ูุตูุงุก ุงูุณุฑ.</p>
                            <div class="guide-rules"><span class="rule-chip">ุงูููุงุท: 5000</span><span class="rule-chip">ุงูุชูููู: 10,000,000</span><span class="rule-chip">ุงูุฃุฏูู: 10,000</span></div>
                            <span class="guide-section-title">๐ ุนุจุงุฏุงุช ุถุฑูุฑูุฉ:</span>
                            <div class="essential-box">ุงูุฅุณุชุบูุงุฑ 1000ุ ุงูุตูุงุฉ ุนูู ุงููุจู 1000ุ ุงูููุงูู: ุงูุจุฑูุงูุฌ ูุงููุงุ ุงููุฑุขู 5 ุฃุญุฒุงุจุ ุตูุงู ุงูุฅุซููู ู ุงูุฎููุณ.</div>
                            <span class="guide-section-title">โจ ููุฌุจุงุช ุงูุชุฑูู:</span>
                            <div class="pos-list">ุงูุชุญูู ุจุนุจูุฏูุฉ ุงููุญุถุ ุงูุฅุฑุดุงุฏ ุจูุณุงู ุงูุญุงูุ ูุงูุฑุญูุฉ ุงููุงุณุนุฉ ุจุงูุฎูู.</div>
                            <span class="guide-section-title">โ๏ธ ููุงูุน ุงูุชุฑูู:</span>
                            <div class="neg-list">ููุงุญุธุฉ ุงููุฑุงูุฉุ ุงููููู ุนูุฏ ุงูุนุทุงุกุ ูุงูุงุดุชุบุงู ุจุบูุฑ ุงููู ุทุฑูุฉ ุนูู.</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <button class="close-guide-btn" onclick="toggleGuide(false)">ูููุช ูุงูุชุฒูุช  </button>
        </div>
    </div>

    <script>
        let countdownSeconds, timerInterval, currentNum = 1;
        let endTime; 
        let missionStars = [false, false, false, false, false, false, false];
        let state = JSON.parse(localStorage.getItem('mirhab_pedro_final')) || { total: 0, filled: [], today: 0, lastDate: "", totalTehlil: 0, todayTehlil: 0, rankIdx: 0 };
        const ranks = [
            { id: 0, name: "ูุจุชุฏุฆ", goal: 40, tehlilReq: 10000, dailyMin: 500, color: "#d4af37" },
            { id: 1, name: "ูุฑูุฏ", goal: 100, tehlilReq: 50000, dailyMin: 1000, color: "#27ae60" },
            { id: 2, name: "ุณุงูู", goal: 300, tehlilReq: 150000, dailyMin: 1000, color: "#2980b9" },
            { id: 3, name: "ูุญุจ", goal: 600, tehlilReq: 500000, dailyMin: 1700, color: "#e74c3c" },
            { id: 4, name: "ุฐุงูุฑ", goal: 1000, tehlilReq: 1000000, dailyMin: 2500, color: "#8e44ad" },
            { id: 5, name: "ูุงูุช", goal: 2000, tehlilReq: 2500000, dailyMin: 5000, color: "#2c3e50" },
            { id: 6, name: "ุฑุจุงูู", goal: 5000, tehlilReq: 10000000, dailyMin: 10000, color: "#000000" }
        ];

        function checkDailyReset() {
            const todayStr = new Date().toDateString();
            if (state.lastDate !== todayStr) { state.today = 0; state.todayTehlil = 0; state.lastDate = todayStr; save(); }
        }

        function party(times = 1, speed = 500) { 
            let count = 0; 
            const interval = setInterval(() => { 
                confetti({ particleCount: 150, spread: 70, origin: { y: 0.6 } }); 
                count++; 
                if (count >= times) clearInterval(interval); 
            }, speed); 
        }

        function skipMission(dir) { let next = currentNum + dir; if (next >= 1 && next <= 7) initMission(next); }
        
        function toggleHeart(btn) {
            const item = btn.closest('.dhikr-item');
            item.classList.remove('active-dhikr');
            item.classList.add('checked-off');
            const nextItem = item.nextElementSibling;
            if (nextItem) { 
                nextItem.classList.add('active-dhikr'); 
                nextItem.scrollIntoView({ behavior: 'smooth', block: 'center' }); 
            }
            else { 
                clearInterval(timerInterval); 
                const now = Date.now();
                if (now <= endTime) {
                    missionStars[currentNum - 1] = true;
                    updateStarDisplay();
                }
                document.getElementById('dot-' + currentNum).classList.add('completed'); 
                party(1); 
                if (currentNum < 7) {
                    setTimeout(() => initMission(currentNum + 1), 800);
                } else { 
                    party(3, 1500); 
                    checkDailyReset();
                    if (state.today < 2) { 
                        if (state.total < ranks[state.rankIdx].goal) { 
                            state.filled.push(state.total); 
                            state.total++; 
                            state.today++; 
                            save(); 
                        } 
                    }
                    document.getElementById('khatm-trigger-btn').style.display = 'inline-block';
                } 
            }
        }

        function showKhatm() {
            document.getElementById('khatm-modal').style.display = 'flex';
        }

        function updateStarDisplay() {
            const starContainer = document.getElementById('star-display');
            starContainer.innerHTML = "";
            missionStars.forEach((isWon, index) => {
                const starItem = document.createElement('div');
                starItem.className = 'star-item';
                if (isWon) {
                    starItem.innerText = (index + 1);
                    starItem.style.visibility = "visible";
                } else {
                    starItem.style.visibility = "hidden";
                }
                starContainer.appendChild(starItem);
            });
        }

        function closeKhatm() { document.getElementById('khatm-modal').style.display = 'none'; showDashboard(); }

        function updateTimer() {
            const now = Date.now();
            const remaining = Math.max(0, Math.floor((endTime - now) / 1000));
            if (remaining <= 0) {
                clearInterval(timerInterval);
                document.getElementById('mission-timer').innerText = "00:00";
                document.getElementById('alarm-snd').play();
            } else {
                let m = Math.floor(remaining / 60), s = remaining % 60;
                document.getElementById('mission-timer').innerText = `${m.toString().padStart(2,'0')}:${s.toString().padStart(2,'0')}`;
            }
        }

        function initMission(num) {
            currentNum = num; document.querySelectorAll('.mission-card').forEach(c => c.classList.remove('active'));
            const activeCard = document.getElementById('mission-' + num); activeCard.classList.add('active');
            activeCard.querySelectorAll('.dhikr-item').forEach(i => i.classList.remove('active-dhikr', 'checked-off'));
            activeCard.querySelector('.dhikr-item').classList.add('active-dhikr');
            countdownSeconds = parseInt(activeCard.dataset.time);
            endTime = Date.now() + (countdownSeconds * 1000); 
            if(timerInterval) clearInterval(timerInterval);
            updateTimer();
            timerInterval = setInterval(updateTimer, 1000);
            window.scrollTo(0,0);
        }

        function showDashboard() {
            checkDailyReset();
            document.getElementById('start-screen').style.display = 'none'; document.getElementById('main-header').style.display = 'none'; document.getElementById('dhikr-container').style.display = 'none'; document.getElementById('dashboard-view').style.display = 'flex';
            let r = ranks[state.rankIdx];
            if (state.total >= r.goal && state.totalTehlil >= r.tehlilReq && state.rankIdx < 6) {
                state.rankIdx++;
                party(5);
                save();
            }
            renderGrid();
        }

        function renderGrid() {
            let r = ranks[state.rankIdx]; 
            document.getElementById('rank-num').innerText = r.id + 1; 
            document.getElementById('rank-name').innerText = r.name; 
            document.getElementById('total-pts').innerText = state.total; 
            document.getElementById('target-pts').innerText = r.goal; 
            document.getElementById('target-tehlil').innerText = r.tehlilReq.toLocaleString();
            document.getElementById('accumulated-tehlil').innerText = state.totalTehlil.toLocaleString();
            const prog = Math.min((state.todayTehlil / r.dailyMin) * 100, 100); 
            const inner = document.getElementById('prog-inner'); 
            inner.style.width = prog + '%'; 
            inner.style.backgroundColor = prog >= 100 ? '#2ecc71' : '#e74c3c';
            const grid = document.getElementById('grid-container'); 
            grid.innerHTML = '';
            for (let i = 0; i < Math.min(r.goal, 100); i++) {
                const sq = document.createElement('div'); 
                sq.className = 'square' + (state.filled.includes(i) ? ' filled' : ''); 
                if (state.filled.includes(i)) sq.style.backgroundColor = r.color; 
                
                sq.onclick = () => { if (!state.filled.includes(i)) { state.filled.push(i); state.total++; save(); renderGrid(); party(1); } };
                
                let longPressTimer;
                const startPress = () => {
                    longPressTimer = setTimeout(() => {
                        if (state.filled.includes(i)) {
                            state.filled = state.filled.filter(n => n !== i);
                            state.total--;
                            save();
                            renderGrid();
                        }
                    }, 800);
                };
                const endPress = () => clearTimeout(longPressTimer);

                sq.onmousedown = startPress;
                sq.ontouchstart = (e) => { e.preventDefault(); startPress(); };
                sq.onmouseup = endPress;
                sq.onmouseleave = endPress;
                sq.ontouchend = endPress;

                grid.appendChild(sq); 
            }
        }

        function addManualTehlil() { const val = parseInt(document.getElementById('tehlil-input').value); if (val > 0) { state.totalTehlil += val; state.todayTehlil += val; save(); renderGrid(); document.getElementById('tehlil-input').value = ''; } }
        
        function toggleGuide(show) { 
            const modal = document.getElementById('guide-modal');
            if (show) {
                document.querySelectorAll('.guide-item').forEach(item => {
                    const rankId = parseInt(item.dataset.rank);
                    if (rankId !== state.rankIdx) { item.classList.add('locked'); } 
                    else { item.classList.remove('locked'); }
                });
                modal.style.display = 'flex';
            } else { modal.style.display = 'none'; }
        }
        
        function getManualHijri() {
            const months = ["ูุญุฑู", "ุตูุฑ", "ุฑุจูุน ุงูุฃูู", "ุฑุจูุน ุงูุซุงูู", "ุฌูุงุฏู ุงูุฃููู", "ุฌูุงุฏู ุงูุขุฎุฑุฉ", "ุฑุฌุจ", "ุดุนุจุงู", "ุฑูุถุงู", "ุดูุงู", "ุฐู ุงููุนุฏุฉ", "ุฐู ุงูุญุฌุฉ"];
            const today = new Date(); 
            const referenceDate = new Date("2026-01-02"); 
            const diffDays = Math.floor((today - referenceDate) / (1000 * 60 * 60 * 24));
            let day = 12 + diffDays; 
            let monthIdx = 6; let year = 1447; 
            while (day > 30) { day -= 30; monthIdx++; if (monthIdx > 11) { monthIdx = 0; year++; } }
            while (day < 1) { day += 30; monthIdx--; if (monthIdx < 0) { monthIdx = 11; year--; } }
            return `${day} ${months[monthIdx]} ${year} ูู`;
        }

        function save() { localStorage.setItem('mirhab_pedro_final', JSON.stringify(state)); }

        window.onload = () => {
            const miladi = new Date().toLocaleDateString('ar-MA', { weekday: 'long', day: 'numeric', month: 'long', year: 'numeric' });
            const hijri = getManualHijri(); 
            document.getElementById('start-miladi').innerText = miladi; 
            document.getElementById('h-miladi').innerText = miladi; 
            document.getElementById('start-hijri').innerText = hijri; 
            document.getElementById('h-hijri').innerText = hijri;
        };

        document.getElementById('real-start-btn').onclick = () => { 
            document.getElementById('start-screen').style.display = 'none'; 
            document.getElementById('main-header').style.display = 'block'; 
            document.getElementById('dhikr-container').style.display = 'block'; 
            document.getElementById('khatm-trigger-btn').style.display = 'none';
            missionStars = [false, false, false, false, false, false, false];
            updateStarDisplay();
            initMission(1); 
        };
    </script>
</body>
</html>
